Drupal.tableHeaderDoScroll=function(){if(typeof(Drupal.tableHeaderOnScroll)=='function')Drupal.tableHeaderOnScroll()};Drupal.behaviors.tableHeader=function(context){if(jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<7)return;var headers=[];$('table.sticky-enabled thead:not(.tableHeader-processed)',context).each(function(){var headerClone=$(this).clone(true).insertBefore(this.parentNode).wrap('<table class="sticky-header"></table>').parent().css({position:'fixed',top:'0px'});headerClone=$(headerClone)[0];headers.push(headerClone);var table=$(this).parent('table')[0];headerClone.table=table;tracker(headerClone);$(table).addClass('sticky-table');$(this).addClass('tableHeader-processed')});var prevAnchor=''
function tracker(e){var viewHeight=document.documentElement.scrollHeight||document.body.scrollHeight;if(e.viewHeight!=viewHeight){e.viewHeight=viewHeight;e.vPosition=$(e.table).offset().top-4;e.hPosition=$(e.table).offset().left;e.vLength=e.table.clientHeight-100;var parentCell=$('th',e.table);$('th',e).each(function(index){var cellWidth=parentCell.eq(index).css('width');if(cellWidth=='auto')cellWidth=parentCell.get(index).clientWidth+'px';$(this).css('width',cellWidth)});$(e).css('width',$(e.table).css('width'))};var hScroll=document.documentElement.scrollLeft||document.body.scrollLeft,vOffset=(document.documentElement.scrollTop||document.body.scrollTop)-e.vPosition,visState=(vOffset>0&&vOffset<e.vLength)?'visible':'hidden';$(e).css({left:-hScroll+e.hPosition+'px',visibility:visState});if(prevAnchor!=location.hash){if(location.hash!=''){var offset=$('td'+location.hash).offset();if(offset){var top=offset.top,scrollLocation=top-$(e).height();$('body, html').scrollTop(scrollLocation)}};prevAnchor=location.hash}};if(!$('body').hasClass('tableHeader-processed')){$('body').addClass('tableHeader-processed');$(window).scroll(Drupal.tableHeaderDoScroll);$(document.documentElement).scroll(Drupal.tableHeaderDoScroll)};Drupal.tableHeaderOnScroll=function(){$(headers).each(function(){tracker(this)})};var time=null,resize=function(){if(time)return;time=setTimeout(function(){$('table.sticky-header').each(function(){this.viewHeight=0;tracker(this)});time=null},250)};$(window).resize(resize)};
Drupal.behaviors.teaser=function(context){if(/KDE/.test(navigator.vendor))return;$('textarea.teaser:not(.teaser-processed)',context).each(function(){var teaser=$(this).addClass('teaser-processed'),body=$('#'+Drupal.settings.teaser[this.id]),checkbox=$('#'+Drupal.settings.teaserCheckbox[this.id]).parent(),checked=$(checkbox).children('input').attr('checked')?true:false,parent=teaser[0].parentNode;$(body).before(teaser);$(parent).remove()
function trim(text){return text.replace(/^\s+/g,'').replace(/\s+$/g,'')}
function join_teaser(){if(teaser.val())body.val(trim(teaser.val())+'\r\n\r\n'+trim(body.val()));teaser[0].value='';$(teaser).attr('disabled','disabled');$(teaser).parent().slideUp('fast');$(this).val(Drupal.t('Split summary at cursor'));$(checkbox).hide();checked=$(checkbox).children('input').attr('checked')?true:false;$(checkbox).children('input').attr('checked',true)}
function split_teaser(){body[0].focus();var selection=Drupal.getSelection(body[0]),split=selection.start,text=body.val();teaser[0].value=trim(text.slice(0,split));body[0].value=trim(text.slice(split));$(teaser).attr('disabled','');$(teaser).parent().slideDown('fast');$(this).val(Drupal.t('Join summary'));$(checkbox).show().children('input').attr('checked',checked)};var button=$('<div class="teaser-button-wrapper"><input type="button" class="teaser-button" /></div>'),include=$('#'+this.id.substring(0,this.id.length-2)+'include');$(include).parent().parent().before(button);var text=body.val().split('<!--break-->');if(text.length>=2){teaser[0].value=trim(text.shift());body[0].value=trim(text.join('<!--break-->'));$(teaser).attr('disabled','');$('input',button).val(Drupal.t('Join summary')).toggle(join_teaser,split_teaser)}else{$('input',button).val(Drupal.t('Split summary at cursor')).toggle(split_teaser,join_teaser);$(checkbox).hide().children('input').attr('checked',true)};if(Drupal.behaviors.textarea&&teaser.is('.form-textarea:not(.textarea-processed)'))Drupal.behaviors.textarea(teaser.parentNode);if($(teaser).is(':disabled'))$(teaser).parent().hide()})};
Drupal.behaviors.textarea=function(context){$('textarea.resizable:not(.textarea-processed)',context).each(function(){if($(this).is('textarea.teaser:not(.teaser-processed)'))return false;var textarea=$(this).addClass('textarea-processed'),staticOffset=null;$(this).wrap('<div class="resizable-textarea"><span></span></div>').parent().append($('<div class="grippie"></div>').mousedown(startDrag));var grippie=$('div.grippie',$(this).parent())[0];grippie.style.marginRight=(grippie.offsetWidth-$(this)[0].offsetWidth)+'px'
function startDrag(e){staticOffset=textarea.height()-e.pageY;textarea.css('opacity',0.25);$(document).mousemove(performDrag).mouseup(endDrag);return false}
function performDrag(e){textarea.height(Math.max(32,staticOffset+e.pageY)+'px');return false}
function endDrag(e){$(document).unbind("mousemove",performDrag).unbind("mouseup",endDrag);textarea.css('opacity',1)}})};
Drupal.verticalTabs=Drupal.verticalTabs||{};Drupal.settings.verticalTabs=Drupal.settings.verticalTabs||{};Drupal.behaviors.verticalTabs=function(){if(!$('.vertical-tabs-list').size()&&Drupal.settings.verticalTabs){var ul=$('<ul class="vertical-tabs-list"></ul>'),panes=$('<div class="vertical-tabs-panes"></div>');$.each(Drupal.settings.verticalTabs,function(k,v){var summary='',cssClass='vertical-tabs-list-'+k;if(v.callback&&Drupal.verticalTabs[v.callback]){summary='<span class="summary">'+Drupal.verticalTabs[v.callback].apply(this,v.args)+'</span>'}else cssClass+=' vertical-tabs-nosummary';$('<li class="vertical-tab-button"><a href="#'+k+'" class="'+cssClass+'"><strong>'+v.name+'</strong>'+summary+'</a></li>').appendTo(ul).find('a').bind('click',function(){$(this).parent().addClass('selected').siblings().removeClass('selected');$('.vertical-tabs-'+k).show().siblings('.vertical-tabs-pane').hide();return false});var fieldset=$('<fieldset></fieldset>'),fieldsetContents=$('.vertical-tabs-'+k+' > .fieldset-wrapper > *');if(fieldsetContents.size()){fieldsetContents.appendTo(fieldset)}else $('.vertical-tabs-'+k).children().appendTo(fieldset);fieldset.children('legend').remove();fieldset.appendTo(panes).addClass('vertical-tabs-'+k).addClass('vertical-tabs-pane').find('input, select, textarea').bind('change',function(){if(v.callback&&Drupal.verticalTabs[v.callback])$('a.vertical-tabs-list-'+k+' span.summary').html(Drupal.verticalTabs[v.callback].apply(this,v.args))});$('.vertical-tabs-'+k).remove()});$('div.vertical-tabs').html(ul).append(panes);$('fieldset.vertical-tabs-pane').each(function(i){if($(this).find('div.form-item .error').size())$('li.vertical-tab-button').eq(i).addClass('error')});$('fieldset.vertical-tabs-pane').hide();$('fieldset.vertical-tabs-pane:first').show();$('div.vertical-tabs ul li:first').addClass('first selected');$('div.vertical-tabs ul li:last').addClass('last');$('div.vertical-tabs').show()}};Drupal.behaviors.verticalTabsReload=function(){$.each(Drupal.settings.verticalTabs,function(k,v){if(v.callback&&Drupal.verticalTabs[v.callback])$('a.vertical-tabs-list-'+k+' span.summary').html(Drupal.verticalTabs[v.callback].apply(this,v.args))})};
Drupal.behaviors.tao=function(context){$('fieldset.collapsible:not(.tao-processed) > legend > .fieldset-title').each(function(){var fieldset=$(this).parents('fieldset').eq(0);fieldset.addClass('tao-processed');if($('input.error, textarea.error, select.error',fieldset).size()>0)$(fieldset).removeClass('collapsed');$(this).click(function(){if(fieldset.is('.collapsed')){$(fieldset).removeClass('collapsed').children('.fieldset-content').show()}else $(fieldset).addClass('collapsed').children('.fieldset-content').hide();return false})})};
Drupal.behaviors.rubik=function(context){$('div.form:has(div.column-main div.buttons):not(.rubik-processed)').each(function(){var form=$(this),offset=$('div.column-side div.buttons',form).height()+$('div.column-side div.buttons',form).offset().top;$(window).scroll(function(){if($(this).scrollTop()>offset){$('div.column-main div.buttons',form).show()}else $('div.column-main div.buttons',form).hide()});form.addClass('rubik-processed')});$('a.toggler:not(.rubik-processed)',context).each(function(){var id=$(this).attr('href').split('#')[1];if($('#'+id).size()>0){$(this).click(function(){toggleable=$('#'+id);toggleable.toggle();$(this).toggleClass('toggler-active');return false})}else{$(this).addClass('toggler-disabled');$(this).click(function(){return false})};$(this).addClass('rubik-processed')})};
